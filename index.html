<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BLUE FOX TASKS</title>

<style>
/* Ù‚Ø§Ø¹Ø¯Ø© Ø¹Ø§Ù…Ø© */
*{
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  font-family: 'Segoe UI', Tahoma, sans-serif;
}

body{
  min-height: 100vh;
  background: linear-gradient(135deg,#0f2027,#203a43);
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 40px 20px;
  transition: 0.3s;
}

/* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
.container{
  width: 100%;
  max-width: 900px;
  background: rgba(255,255,255,0.06);
  backdrop-filter: blur(15px);
  border-radius: 25px;
  padding: 25px;
  box-shadow: 0 20px 50px rgba(0,0,0,0.5);
  display: flex;
  flex-direction: column;
  gap: 15px;
}

/* Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
h2{
  text-align: center;
  margin-bottom: 15px;
  font-size: 1.8rem;
  font-weight: 900;
}

/* Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„Ø§Øª */
input, select{
  width: 100%;
  padding: 12px 15px;
  border: none;
  border-radius: 12px;
  margin-bottom: 10px;
  font-size: 1rem;
  outline: none;
  background: rgba(255,255,255,0.1);
  color: inherit;
  transition: 0.3s;
}

input:focus, select:focus{
  background: rgba(255,255,255,0.2);
}

/* Ø£Ø²Ø±Ø§Ø± */
button{
  width: 100%;
  padding: 12px;
  border: none;
  border-radius: 15px;
  font-weight: bold;
  cursor: pointer;
  background: linear-gradient(90deg,#00c6ff,#0072ff);
  color: #fff;
  font-size: 1rem;
  transition: 0.3s;
}

button:hover{
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.5);
}

/* Ø²Ø± Ø§Ù„Ø­Ø°Ù ÙˆØ§Ù„ØªÙ…ÙƒÙŠÙ† */
.actions{
  display: flex;
  gap: 10px;
  margin-top: 8px;
}

.actions button{
  flex: 1;
  font-size: 0.9rem;
  padding: 8px;
}

.del{ background: #e74c3c; }
.del:hover{ background: #c0392b; }

.doneBtn{ background: #2ecc71; }
.doneBtn:hover{ background: #27ae60; }

/* Ø§Ù„Ù…Ù‡Ø§Ù… */
.task{
  background: rgba(255,255,255,0.12);
  border-radius: 15px;
  padding: 12px;
  margin-top: 10px;
  transition: 0.3s;
}

.task.done{
  opacity: 0.6;
  text-decoration: line-through;
}

/* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠØ© */
.top-actions{
  display: flex;
  gap: 10px;
  margin-bottom: 10px;
}

.top-actions button{
  flex: 1;
  font-size: 1rem;
  padding: 10px;
}

/* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ / Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ */
body.light{
  background: linear-gradient(135deg,#f5f7fa,#c3cfe2);
  color: #000;
}

body.light .container{
  background: rgba(0,0,0,0.1);
}

body.light input, body.light select{
  background: rgba(0,0,0,0.1);
  color: #000;
}

body.light input:focus, body.light select:focus{
  background: rgba(0,0,0,0.2);
}

body.light button{
  color: #fff;
}

body.light .del{ background: #e74c3c; }
body.light .doneBtn{ background: #2ecc71; }

/* Ù…ØªØ¬Ø§ÙˆØ¨ */
@media(max-width: 600px){
  .container{
    width: 95%;
  }
}
</style>

</head>
<body>

<div class="container">
  <h2 id="title">ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…</h2>

  <div class="top-actions">
    <button onclick="toggleLang()">ğŸŒ Ø¹Ø±Ø¨ÙŠ / English</button>
    <button onclick="toggleTheme()">ğŸŒ™ / â˜€ï¸</button>
  </div>

  <input id="taskText" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ù‡Ù…Ø©">
  <input id="taskDate" type="datetime-local">
  <button onclick="addTask()">â• Ø¥Ø¶Ø§ÙØ©</button>

  <div id="tasks"></div>
</div>

<script>
let lang = localStorage.getItem("lang") || "ar";
let tasks = JSON.parse(localStorage.getItem("tasks")) || [];

const texts={
  ar:{
    title:"ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…",
    placeholder:"Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ù‡Ù…Ø©",
    add:"â• Ø¥Ø¶Ø§ÙØ©",
    done:"âœ” ØªÙ…",
    del:"âœ– Ø­Ø°Ù",
    notify:"â° Ù„Ø¯ÙŠÙƒ Ù…Ù‡Ù…Ø© Ø§Ù„Ø¢Ù†"
  },
  en:{
    title:"ğŸ“‹ To-Do List",
    placeholder:"Write a task",
    add:"â• Add",
    done:"âœ” Done",
    del:"âœ– Delete",
    notify:"â° You have a task now"
  }
};

function save(){ localStorage.setItem("tasks",JSON.stringify(tasks)); }

function render(){
  document.getElementById("tasks").innerHTML="";
  tasks.forEach((t,i)=>{
    const div=document.createElement("div");
    div.className="task"+(t.done?" done":"");
    div.innerHTML=`
      <strong>${t.text}</strong><br>
      ğŸ“… ${t.date||"-"}
      <div class="actions">
        <button class="doneBtn" onclick="toggleDone(${i})">${texts[lang].done}</button>
        <button class="del" onclick="delTask(${i})">${texts[lang].del}</button>
      </div>`;
    document.getElementById("tasks").appendChild(div);
  });
}

function addTask() {
  const text = document.getElementById("taskText").value;
  const date = document.getElementById("taskDate").value;
  if (!text || !date) return;

  const task = { text, date, done: false, notified: false };
  tasks.push(task);

  document.getElementById("taskText").value = "";
  document.getElementById("taskDate").value = "";
  save();
  render();
}

function delTask(i){ tasks.splice(i,1); save(); render(); }

function toggleDone(i){ tasks[i].done=!tasks[i].done; save(); render(); }

function toggleTheme(){ document.body.classList.toggle("light"); }

function toggleLang(){
  lang = lang==="ar"?"en":"ar";
  localStorage.setItem("lang",lang);
  applyLang();
}

function applyLang(){
  document.documentElement.lang=lang;
  document.getElementById("title").innerText=texts[lang].title;
  document.getElementById("taskText").placeholder=texts[lang].placeholder;
  document.querySelector("button[onclick='addTask()']").innerText=texts[lang].add;
  render();
}

// Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
function checkNotify(){
  if(Notification.permission!=="granted"){ Notification.requestPermission(); }
  const now = new Date();
  tasks.forEach(t=>{
    if(!t.done && !t.notified){
      const taskTime = new Date(t.date);
      if(now >= taskTime){
        new Notification(texts[lang].notify, {body: t.text});
        t.notified = true;
        save();
      }
    }
  });
}

applyLang();
render();
setInterval(checkNotify, 1000); // ÙŠÙØ­Øµ ÙƒÙ„ Ø«Ø§Ù†ÙŠØ©
</script>

</body>
</html>
